# Day 28: API Endpoints – Powering the Éditeur Search Engine
# Connecting user queries with Companion Magazine content logic.

from flask import Flask, request, jsonify

app = Flask(__name__)

# Simulated Database (Éditeur & The Companion Magazine Content)
event_db = [
    {"id": 1, "name": "The Companion – AI Special Edition", "type": "Magazine Issue", "points": 10},
    {"id": 2, "name": "Writer Recruitment Drive", "type": "Editorial Event", "points": 20},
    {"id": 3, "name": "Design Team Workshop", "type": "Workshop", "points": 50},
    {"id": 4, "name": "Monthly Editorial Meeting", "type": "Meeting", "points": 15}
]

@app.route('/search', methods=['GET'])
def search_content():
    # 1. Capture the query parameter 'q' from the URL
    query = request.args.get('q', '').lower()
    
    # 2. Logic: Filter content based on search keyword
    # Simulates a magazine content search engine
    results = [e for e in event_db if query in e['name'].lower() or query in e['type'].lower()]
    
    return jsonify({
        "status": "success",
        "count": len(results),
        "query": query,
        "data": results
    })

if __name__ == '__main__':
    app.run(debug=True)
